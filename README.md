# 🏛️ 宋史探微 - 宋代历史 RAG 系统

本项目旨在构建一个聚焦 **宋代历史知识问答** 的智能检索增强生成系统（RAG, Retrieval-Augmented Generation）。  
系统实现了从知识爬取、数据清洗、模型微调到多源检索与可视化交互的完整闭环，致力于提供 **高精度、可解释、可扩展** 的领域智能问答服务。

---

## ✨ 核心功能

- **知识库构建**
  - 支持上传多格式文档（PDF, DOCX, TXT）
  - 定向爬取宋史相关网页，自动清洗与语义分块
  - 构建 FAISS 向量索引与 BM25 关键词索引

- **模型优化**
  - 基于大模型自动生成 Q&A 数据集
  - 微调双编码器模型 `bge-large-zh-v1.5`
  - 使用 LoRA 微调生成模型 `deepseek-r1-7b`
  - 评估指标（ROUGE / BLEU）显著提升

- **多路检索与排序**
  - 支持本地知识库检索、实时联网检索与指定网页检索
  - 融合 FAISS + BM25 检索结果
  - 使用 Cross-Encoder 精排模型 `bge-reranker-large` 进行二次排序
  - 支持递归查询与自动优化

- **智能问答与安全防护**
  - 双层安全检测机制（规则 + LLM）
  - 用户意图识别（知识问答 / 闲聊）
  - 基于上下文的流式生成与事实冲突检测

- **前后端一体化服务**
  - 后端基于 Flask + SQLite
  - 前端采用原生 JS + HTML + CSS
  - 实现实时进度可视化（检索 → 生成 → 检测）

---
📌 关键词： RAG · DeepSeek · FAISS · LoRA · 宋代历史 · 知识检索
